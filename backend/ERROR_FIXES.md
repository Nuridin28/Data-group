# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –û—à–∏–±–∫–∞ "['channel_encoded'] not in index" 
**–§–∞–π–ª:** `services/prediction_service.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–ª–æ–Ω–∫–∞ `channel_encoded` —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏ –º–æ–¥–µ–ª–∏, –Ω–æ –Ω–µ –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ `channel_encoded` —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö –∫–æ–ª–æ–Ω–æ–∫ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `LabelEncoder`
- ‚úÖ Fallback –Ω–∞ rule-based detection –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö ML –º–æ–¥–µ–ª–∏
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `channel_encoder` –≤ `__init__`

### 2. –û—à–∏–±–∫–∏ OpenAI API Key –≤ –ª–æ–≥–∞—Ö
**–§–∞–π–ª—ã:** `rag/rag_chain.py`, `rag/vectorstore.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª–Ω—ã–µ –æ—à–∏–±–∫–∏ —Å API –∫–ª—é—á–æ–º –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –°–∫—Ä—ã—Ç–∏–µ –¥–µ—Ç–∞–ª–µ–π API –∫–ª—é—á–∞ –∏–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–∫–∞–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (—Ñ–ª–∞–≥ `_vectorstore_warning_shown`)
- ‚úÖ –ö—Ä–∞—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω—ã—Ö traceback
- ‚úÖ Graceful fallback –Ω–∞ CSV –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ `self.llm is None` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–∞–º–∏
- ‚úÖ Fallback –æ—Ç–≤–µ—Ç—ã –∫–æ–≥–¥–∞ AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### 3. –≠–Ω–¥–ø–æ–∏–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
**–§–∞–π–ª:** `routers/upload.py` (–¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ)

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ `POST /api/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ CSV —Ñ–∞–π–ª–æ–≤
- ‚úÖ `GET /api/upload/{file_id}/info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ `data/uploads/`

## üìù –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö:
- ‚úÖ –ù–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± API –∫–ª—é—á–µ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ —Å `channel_encoded`
- ‚úÖ –ß–∏—Å—Ç—ã–µ –ª–æ–≥–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- ‚úÖ Graceful degradation –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ AI —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üöÄ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:
```bash
cd backend
python run.py
```

–õ–æ–≥–∏ —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç —á–∏—â–µ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–µ–µ!
